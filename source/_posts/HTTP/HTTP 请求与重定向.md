---
title: HTTP 请求与重定向
categories: HTTP
tags: [HTTP]
date: 2021-01-14 15:42:00
---

# HTTP 请求与重定向

### 幂等方法

幂等：指无论调用多少次都是相同的作用（对于资源而言）

*   幂等方法：`GET`、`DELETE`、`PUT`、`HEAD`
*   非幂等方法：`POST`、`PATCH`

### HTTP请求方法

| 方法 | 作用 | 安全性 | 幂等性 |
| --- | --- | --- | --- |
| GET | 查询 | 是 | 是 |
| POST | 新增 | 否 | 否 |
| PUT | 更新 | 否 | 是 |
| DELETE | 删除 | 否 | 是 |
| PATCH | 局部更新 | 否 | 否 |

在HTTP1.0中，对于301、302的 location 中包含的重定向url，如果请求method不是GET或者HEAD，那么浏览器是禁止自动重定向的，除非得到用户的确认，因为POST、PATCH等请求是非冥等的（也就是再次请求时服务器的资源可能已经发生了变化）

虽然rfc明确了上述的规定，但是很多的浏览器不遵守这条规定，无论原来的请求方法是什么都会自动用GET方法重定向到location指定的url。就是说现存的很多浏览器在遇到POST请求返回301、302状态码的时候自动用GET请求location中的url，无需用户确认。

为了解决这种不规范的问题，HTTP 1.1中新增了303、307状态码，用来明确服务器期待客户端进行何种反应。

303状态码，指客户端可以自动用GET方法重定向请求location中的url，无需用户确认。无论之前是 GET 方式还是 POST 方式。

307状态码，指客户端需要遵守原本301、302的规定，除GET、HEAD方法外，其他的请求方法必须等客户确认才能跳转。

*   301：（Permanently Moved）永久重定向
*   302：（Temporarily Moved）临时重定向。标准规定，不允许客户端在重定向时改变请求的方法，但浏览器并未遵循该标准（303/307 为 HTTP/1.1 标准，用于解决 302 的问题）
*   303：会使用GET方式访问在Location中规定的URI，而无视原先请求的方法
*   307：对于非GET、HEAD请求，浏览器会自动禁止重定向，除非得到用户确认

> **302 网址劫持：**  指利用域 A 上的一个页引用有高质量更新内容的域 B。这样基于从域B“偷来”的更新内容，这个页面会有较好的排名。并且利用伪装方式，将用户重定向到另一个页面。（主要通过窃取的内容、PR来获取搜索引擎较好的排名）

**重定向与转发**

*   请求重定向：客户端行为，相当于两次请求，前一次的请求对象不保存，URL改变
*   请求转发：服务器端行为，是一次请求，前一次的请求对象保存，URL不改变